<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title>Your Data and Visualisations</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="site_libs/pagedtable-1.1/js/pagedtable.js"></script>
<link href="site_libs/font-awesome-4.5.0/css/font-awesome.min.css" rel="stylesheet" />
<link rel="shortcut icon" href="img/hex.png">


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; background-color: #f8f8f8; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
pre, code { background-color: #f8f8f8; }
code > span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code > span.dt { color: #204a87; } /* DataType */
code > span.dv { color: #0000cf; } /* DecVal */
code > span.bn { color: #0000cf; } /* BaseN */
code > span.fl { color: #0000cf; } /* Float */
code > span.ch { color: #4e9a06; } /* Char */
code > span.st { color: #4e9a06; } /* String */
code > span.co { color: #8f5902; font-style: italic; } /* Comment */
code > span.ot { color: #8f5902; } /* Other */
code > span.al { color: #ef2929; } /* Alert */
code > span.fu { color: #000000; } /* Function */
code > span.er { color: #a40000; font-weight: bold; } /* Error */
code > span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #000000; } /* Constant */
code > span.sc { color: #000000; } /* SpecialChar */
code > span.vs { color: #4e9a06; } /* VerbatimString */
code > span.ss { color: #4e9a06; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #000000; } /* Variable */
code > span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code > span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code > span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code > span.ex { } /* Extension */
code > span.at { color: #c4a000; } /* Attribute */
code > span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code > span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */

</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />

</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 60px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 65px;
  margin-top: -65px;
}

.section h2 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h3 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h4 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h5 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h6 {
  padding-top: 65px;
  margin-top: -65px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>


<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->




<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}


.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
  padding-left: 25px;
  text-indent: 0;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>

<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Hack Your Data Beautiful</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="/">
    <span class="fa fa-home"></span>
     
    psyTeachR
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Monday
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="intro-to-r.html">Introduction to R</a>
    </li>
    <li>
      <a href="intro-to-tidy-data.html">Intro to Tidy Data</a>
    </li>
    <li>
      <a href="rmarkdown_1.html">Intro to R Markdown</a>
    </li>
    <li>
      <a href="quant-data-vis.html">Quantitative Data Visualisation</a>
    </li>
    <li>
      <a href="qual-data-vis.html">Qualitative Data Visualization</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Tuesday
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="visualising-the-headlines.html">Visualising the Headlines</a>
    </li>
    <li>
      <a href="scrape-twitter.html">Twitter Data</a>
    </li>
    <li>
      <a href="rmarkdown_2.html">R Markdown Websites</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Wednesday
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="your-data-and-vis.html">Your Data and Visualisations</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="r_instructions.html">Installing R</a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Your Data and Visualisations</h1>

</div>


<p><img src="img/hex.png" class="hex"> <img src="img/ggplot2.png" class="hex"></p>
<div id="exercises" class="section level1">
<h1>Exercises</h1>
<p>In this session, we will be thrown from one real-life dataset to another to make quick judgments about which visualisation is most appropriate and how to construct it.</p>
<p>The datasets have been sourced from the political poll website <a href="https://data.fivethirtyeight.com/">FiveThirtyEight</a>, founded by America’s most famous data analyst, <a href="https://en.wikipedia.org/wiki/Nate_Silver">Nate Silver</a>. If you want to hone your skills further, you can find many more CC-licensed datasets there.</p>
<p>We have cleaned the data for you and will show you a snippet of what its structure looks like. Based on that structure, in groups of three:</p>
<ul>
<li><p>discuss <em>which</em> visualisation would be appropriate (there is no unique right answer here)</p></li>
<li><p>implement it in <code>ggplot2</code> by choosing the aesthetics and geom objects</p></li>
<li><p>bonus points if you add sensible labels and axes</p></li>
</ul>
<p>Think of it as a “visualiz-athon”, but don’t stress about finishing all of them. In fact, feel free to pick and choose whichever dataset tickles your fancy.</p>
<p>First, however, we will need to install and attach the following libraries. We install using, for example, <code>install.packages(&quot;tidyverse&quot;)</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(tidyverse)
<span class="kw">library</span>(RCurl) <span class="co">#Case-sensitive</span>
<span class="kw">library</span>(ggmap)
<span class="kw">library</span>(maps)
<span class="kw">library</span>(network)
<span class="kw">library</span>(sna)
<span class="kw">library</span>(GGally)</code></pre></div>
<div id="what-predicts-hate-crimes-in-america" class="section level2">
<h2>1. What predicts hate crimes in America?</h2>
<p><strong>Dataset: <a href="files/your-data-and-vis/hate_crimes.csv">hate_crimes.csv</a></strong></p>
<p>The US has an acute problem with hate crimes. In the week following Trump’s 2016 election night, the hate crimes famously spiked compared with the long-running average.</p>
<p>Sociologists argue that it is not a uniformly distributed problem, however. They suspect that it could be related to factors like inequality, urban living and median income.</p>
<p><img src="img/hatecrime.png" alt="Hatecrime" style="float:right;"></p>
<p>They have data on the average number of hate crimes (per 100,000 people) in USA between 2010 and 2015 for each American state. They also have a measurement for inequality called gini_index, the proportion of people living in metro areas, and the median income of the state.</p>
<p>As you see below, the dataframe is called <code>hatedata</code> and its columns are called <code>median_houshold_income</code>, <code>gini_index</code>, and <code>share_population_in_metro_areas</code>.</p>
<table>
<caption>Hate crime data</caption>
<thead>
<tr class="header">
<th align="left">state</th>
<th align="right">median_household_income</th>
<th align="right">gini_index</th>
<th align="right">share_population_in_metro_areas</th>
<th align="right">avg_hatecrimes_per_100k_fbi</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Alabama</td>
<td align="right">42278</td>
<td align="right">0.472</td>
<td align="right">0.64</td>
<td align="right">1.80641</td>
</tr>
<tr class="even">
<td align="left">Alaska</td>
<td align="right">67629</td>
<td align="right">0.422</td>
<td align="right">0.63</td>
<td align="right">1.65670</td>
</tr>
<tr class="odd">
<td align="left">Arizona</td>
<td align="right">49254</td>
<td align="right">0.455</td>
<td align="right">0.90</td>
<td align="right">3.41393</td>
</tr>
<tr class="even">
<td align="left">Arkansas</td>
<td align="right">44922</td>
<td align="right">0.458</td>
<td align="right">0.69</td>
<td align="right">0.86921</td>
</tr>
<tr class="odd">
<td align="left">California</td>
<td align="right">60487</td>
<td align="right">0.471</td>
<td align="right">0.97</td>
<td align="right">2.39799</td>
</tr>
<tr class="even">
<td align="left">Colorado</td>
<td align="right">60940</td>
<td align="right">0.457</td>
<td align="right">0.80</td>
<td align="right">2.80469</td>
</tr>
</tbody>
</table>
<p>What would be a suitable visualization for sociologists to investigate whether these three factors play a role? Is it feasible to combine them all into one or are they better split into several graphs? What possible problems do you see in your graph that could make analysis more difficult?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(hatedata, <span class="kw">aes</span>(<span class="dt">x=</span>____, <span class="dt">y=</span>_____)) <span class="op">+</span><span class="st"> </span><span class="kw">geom___</span>()</code></pre></div>
</div>
<div id="do-pulitzers-matter-for-a-newspapers-growth" class="section level2">
<h2>2. Do Pulitzers matter for a newspaper’s growth?</h2>
<p><strong>Dataset: <a href="files/your-data-and-vis/pulitzer-circulation-data.csv">pulitzer-circulation-data.csv</a></strong></p>
<p>The finest honour any investigative journalist could aspire to is called the Pulitzer Prize. The owners of the newspaper they work for surely wouldn’t mind either, as this could lead to a boost in circulation. But is there empirical evidence to support their assumption that Pulitzers matter for sales?</p>
<p><img src="img/pulitzer.jpg" alt="Pulitzer" style="float:right;width:300px;"></p>
<p>In the dataset below, called <code>puldata</code>, there is information on the size of their circulation in 2004 (<code>Daily.Circulation..2004</code>), the percentage by which it grew or declined between 2004 and 2013 (<code>Change.in.Daily.Circulation</code>) and finally how many Pulitzer Prize winners worked at the newspaper between those years (<code>Pulitzer.Prize.Winners.and.Finalists..2004.2014</code>).</p>
<table>
<caption>Pulitzer and Newspaper data</caption>
<thead>
<tr class="header">
<th align="right">Daily.Circulation..2004</th>
<th align="left">Change.in.Daily.Circulation..2004.2013</th>
<th align="right">Pulitzer.Prize.Winners.and.Finalists..2004.2014</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">NA</td>
<td align="left">-24%</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="right">NA</td>
<td align="left">+13%</td>
<td align="right">20</td>
</tr>
<tr class="odd">
<td align="right">NA</td>
<td align="left">+67%</td>
<td align="right">62</td>
</tr>
<tr class="even">
<td align="right">983727</td>
<td align="left">-34%</td>
<td align="right">41</td>
</tr>
<tr class="odd">
<td align="right">760034</td>
<td align="left">-38%</td>
<td align="right">48</td>
</tr>
<tr class="even">
<td align="right">712671</td>
<td align="left">-28%</td>
<td align="right">2</td>
</tr>
</tbody>
</table>
<p>Is there a relationship, would you say? Is there a way to make the visualisation also show whether the initial 2004 circulation influenced the Pulitzer-fueled growth?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(puldata, <span class="kw">aes</span>(<span class="dt">x=</span>________________)) <span class="op">+</span><span class="st"> </span><span class="kw">geom______</span>()</code></pre></div>
</div>
<div id="what-is-the-shape-of-trumps-twitter-popularity" class="section level2">
<h2>3. What is the shape of Trump’s twitter popularity?</h2>
<p><strong>Dataset: <a href="files/your-data-and-vis/realDonaldTrump.csv">realDonaldTrump.csv</a></strong></p>
<p>Now to American politics and their principal arena: the Twitter-verse.</p>
<p><img src="img/trumptweet.jpg" alt="Trump" style="float:right;width:300px;"></p>
<p>Trump boasts an impressive following of more than 150 million accounts (perhaps with a few Russian bots included), but follower numbers never give a full story. Political scientists may want to have a closer look at the number of interactions, and specifically how many people like (or ‘favorite’) his tweets.</p>
<p>In the <code>trumpdata</code> prepared below, there is a <code>url</code> giving the link to his tweet, <code>replies</code>, <code>retweets</code>, and <code>favorites</code>.</p>
<table>
<caption>Trump Twitter data</caption>
<thead>
<tr class="header">
<th align="left">url</th>
<th align="right">replies</th>
<th align="right">retweets</th>
<th align="right">favorites</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><a href="https://twitter.com/realDonaldTrump/status/922440008971292672" class="uri">https://twitter.com/realDonaldTrump/status/922440008971292672</a></td>
<td align="right">46228</td>
<td align="right">10243</td>
<td align="right">49468</td>
</tr>
<tr class="even">
<td align="left"><a href="https://twitter.com/realDonaldTrump/status/922430688703451136" class="uri">https://twitter.com/realDonaldTrump/status/922430688703451136</a></td>
<td align="right">31419</td>
<td align="right">14006</td>
<td align="right">62406</td>
</tr>
<tr class="odd">
<td align="left"><a href="https://twitter.com/realDonaldTrump/status/922428118685581313" class="uri">https://twitter.com/realDonaldTrump/status/922428118685581313</a></td>
<td align="right">9552</td>
<td align="right">13719</td>
<td align="right">62662</td>
</tr>
<tr class="even">
<td align="left"><a href="https://twitter.com/realDonaldTrump/status/922072236592435200" class="uri">https://twitter.com/realDonaldTrump/status/922072236592435200</a></td>
<td align="right">56238</td>
<td align="right">25102</td>
<td align="right">112890</td>
</tr>
<tr class="odd">
<td align="left"><a href="https://twitter.com/realDonaldTrump/status/922070659093671936" class="uri">https://twitter.com/realDonaldTrump/status/922070659093671936</a></td>
<td align="right">32136</td>
<td align="right">21573</td>
<td align="right">97145</td>
</tr>
<tr class="even">
<td align="left"><a href="https://twitter.com/realDonaldTrump/status/922067676708638721" class="uri">https://twitter.com/realDonaldTrump/status/922067676708638721</a></td>
<td align="right">11153</td>
<td align="right">7336</td>
<td align="right">42415</td>
</tr>
</tbody>
</table>
<p>How could you show to political scientists the general tendencies of his favorite-numbers? Are they always hovering around the same number? Are some massively more popular than most?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(trumpdata, <span class="kw">aes</span>(<span class="dt">x=</span>_____)) <span class="op">+</span><span class="st"> </span><span class="kw">geom______</span>()</code></pre></div>
</div>
<div id="which-politicians-are-most-rapped-about" class="section level2">
<h2>4. Which politicians are most rapped about?</h2>
<p><strong>Dataset: <a href="files/your-data-and-vis/genius_hip_hop_lyrics.csv">genius_hip_hop_lyrics.csv</a></strong></p>
<p>On the same political note, but on a different platform, data from the musical lyrics website <a href="www.genius.com">Genius.com</a> reveals that politcians are a favourite topic in rap songs. This popularity stretches decades back.</p>
<p><img src="img/rapper.jpg" alt="Rapper" style="float:right;width:300px;"></p>
<p>Clever social scientists studying this phenomenon have applied a technique called <em>sentiment analysis</em> to determine whether the rapper’s attitude towards the politician is positive, negative or neutral.</p>
<p>Have a look at the <code>hiphopdata</code> set below, and its three fields <code>candidate</code>, <code>song</code>, <code>artist</code>, and <code>sentiment</code>.</p>
<table>
<caption>Hiphop Politics Data</caption>
<thead>
<tr class="header">
<th align="left">candidate</th>
<th align="left">song</th>
<th align="left">artist</th>
<th align="left">sentiment</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Mike Huckabee</td>
<td align="left">None Shall Pass</td>
<td align="left">Aesop Rock</td>
<td align="left">neutral</td>
</tr>
<tr class="even">
<td align="left">Mike Huckabee</td>
<td align="left">Wellstone</td>
<td align="left">Soul Khan</td>
<td align="left">negative</td>
</tr>
<tr class="odd">
<td align="left">Jeb Bush</td>
<td align="left">Awe</td>
<td align="left">Dez &amp; Nobs</td>
<td align="left">neutral</td>
</tr>
<tr class="even">
<td align="left">Jeb Bush</td>
<td align="left">The Truth</td>
<td align="left">Diabolic</td>
<td align="left">negative</td>
</tr>
<tr class="odd">
<td align="left">Jeb Bush</td>
<td align="left">Money Man</td>
<td align="left">Gorilla Zoe</td>
<td align="left">negative</td>
</tr>
<tr class="even">
<td align="left">Jeb Bush</td>
<td align="left">Hidden Agenda</td>
<td align="left">K-Rino</td>
<td align="left">negative</td>
</tr>
</tbody>
</table>
<p>Which politicians are given the rap treatment most often, we wonder? And is there a way to visualize conveniently the proportion of different rap sentiments among the lyrical references?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(hiphopdata, <span class="kw">aes</span>(<span class="dt">x=</span>_____, <span class="dt">fill=</span>______)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_____</span>(____)</code></pre></div>
</div>
<div id="who-cares-about-the-oxford-comma" class="section level2">
<h2>5. Who cares about the Oxford comma?</h2>
<p><strong>Dataset: <a href="files/your-data-and-vis/comma-survey.csv">comma-survey.csv</a></strong></p>
<p>Now for a controversial, English-related debate. As you may know, the <em>Oxford comma</em> refers to whether, at the end of a listing, you should add a comma or not before the last item. For example, is it right to say <em>It’s important for a person to be honest, kind and loyal.</em> or would you rather have it as <em>It’s important for a person to be honest, kind, and loyal</em>.</p>
<p><img src="img/comma.jpg" alt="Comma" style="float:right;width:300px;"></p>
<p>To settle the matter via democratic processes, a poll was conducted that asked people which option they preferred. The pollsters also asked about their education background, thinking that perhaps postgraduates would be more pedantic in the matter.</p>
<p>The data has been prepared below, in <code>commaperc</code>, which contains the percentages (<code>freq</code>) of people for each <code>Education</code> group who preferred one or the other.</p>
<table>
<caption>Oxford Comma Opinions</caption>
<thead>
<tr class="header">
<th align="left">Education</th>
<th align="left">Opinion</th>
<th align="right">n</th>
<th align="right">freq</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"></td>
<td align="left">It’s important for a person to be honest, kind and loyal.</td>
<td align="right">50</td>
<td align="right">0.48544</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">It’s important for a person to be honest, kind, and loyal.</td>
<td align="right">53</td>
<td align="right">0.51456</td>
</tr>
<tr class="odd">
<td align="left">Bachelor degree</td>
<td align="left">It’s important for a person to be honest, kind and loyal.</td>
<td align="right">145</td>
<td align="right">0.42151</td>
</tr>
<tr class="even">
<td align="left">Bachelor degree</td>
<td align="left">It’s important for a person to be honest, kind, and loyal.</td>
<td align="right">199</td>
<td align="right">0.57849</td>
</tr>
<tr class="odd">
<td align="left">Graduate degree</td>
<td align="left">It’s important for a person to be honest, kind and loyal.</td>
<td align="right">104</td>
<td align="right">0.37681</td>
</tr>
<tr class="even">
<td align="left">Graduate degree</td>
<td align="left">It’s important for a person to be honest, kind, and loyal.</td>
<td align="right">172</td>
<td align="right">0.62319</td>
</tr>
</tbody>
</table>
<p>So, postgraduates - are we more pedantic about the Oxford commas?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(commaperc, <span class="kw">aes</span>(<span class="dt">x=</span>_____, <span class="dt">y=</span> _____, <span class="dt">fill=</span>_____)) <span class="op">+</span><span class="st"> </span><span class="kw">geom____</span>(_____)</code></pre></div>
</div>
<div id="which-airlines-are-the-best-to-fly-with" class="section level2">
<h2>6. Which airlines are the best to fly with?</h2>
<p><strong>Dataset: <a href="files/your-data-and-vis/airline-safety.csv">airline-safety.csv</a></strong></p>
<p>With the twin Boeing disasters fresh in memory, we are excused to sometimes worry a bit about the safety records of modern airlines. So let’s have a look at them.</p>
<p>In the <code>airdata</code> dataset below, there is a number of fatalities between 2000-2014 given as a heartless statistic in <code>fatalities_00_14</code> for each <code>airline</code>. Have a look.</p>
<table>
<caption>Airport fatality data</caption>
<thead>
<tr class="header">
<th align="left">airline</th>
<th align="right">avail_seat_km_per_week</th>
<th align="right">incidents_85_99</th>
<th align="right">fatal_accidents_85_99</th>
<th align="right">fatalities_85_99</th>
<th align="right">incidents_00_14</th>
<th align="right">fatal_accidents_00_14</th>
<th align="right">fatalities_00_14</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Malaysia Airlines</td>
<td align="right">1039171244</td>
<td align="right">3</td>
<td align="right">1</td>
<td align="right">34</td>
<td align="right">3</td>
<td align="right">2</td>
<td align="right">537</td>
</tr>
<tr class="even">
<td align="left">American*</td>
<td align="right">5228357340</td>
<td align="right">21</td>
<td align="right">5</td>
<td align="right">101</td>
<td align="right">17</td>
<td align="right">3</td>
<td align="right">416</td>
</tr>
<tr class="odd">
<td align="left">Air France</td>
<td align="right">3004002661</td>
<td align="right">14</td>
<td align="right">4</td>
<td align="right">79</td>
<td align="right">6</td>
<td align="right">2</td>
<td align="right">337</td>
</tr>
<tr class="even">
<td align="left">Kenya Airways</td>
<td align="right">277414794</td>
<td align="right">2</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">2</td>
<td align="right">2</td>
<td align="right">283</td>
</tr>
<tr class="odd">
<td align="left">China Airlines</td>
<td align="right">813216487</td>
<td align="right">12</td>
<td align="right">6</td>
<td align="right">535</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">225</td>
</tr>
<tr class="even">
<td align="left">TAM</td>
<td align="right">1509195646</td>
<td align="right">8</td>
<td align="right">3</td>
<td align="right">98</td>
<td align="right">7</td>
<td align="right">2</td>
<td align="right">188</td>
</tr>
</tbody>
</table>
<p>This data has already been sorted from high-to-low. We wonder of course whether we could summarise visually which airline we should avoid in the future, assuming that their past incidents has something to say about their future safety.</p>
<p>With so many airlines on display, is there a way to prevent it looking cluttered?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(airdata, <span class="kw">aes</span>(<span class="dt">y=</span>_____, <span class="dt">x=</span>_____)) <span class="op">+</span><span class="st"> </span><span class="kw">geom___</span>()  </code></pre></div>
</div>
<div id="what-is-the-teenagers-drug-of-choice" class="section level2">
<h2>7. What is the teenagers’ drug of choice?</h2>
<p><strong>Dataset: <a href="files/your-data-and-vis/drug-use-by-age.csv">drug-use-by-age.csv</a></strong></p>
<p>Many communities struggle with youth drug use, which could be carried over to later stages of life. To monitor the shares of people at different ages using drugs, authorities have collected cross-sectional data showing, for each drug, how many percent use it in each age interval.</p>
<p><img src="img/drugs.jpg" alt="Drugs" style="float:right;width:300px;"></p>
<p>This data is found in <code>drugdata</code>, which has the fields <code>drug</code> and <code>percentage</code>.</p>
<table>
<caption>Drug use data</caption>
<thead>
<tr class="header">
<th align="left">age</th>
<th align="right">marijuana</th>
<th align="left">drug</th>
<th align="right">percentage</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">12</td>
<td align="right">1.1</td>
<td align="left">cocaine</td>
<td align="right">0.1</td>
</tr>
<tr class="even">
<td align="left">13</td>
<td align="right">3.4</td>
<td align="left">cocaine</td>
<td align="right">0.1</td>
</tr>
<tr class="odd">
<td align="left">14</td>
<td align="right">8.7</td>
<td align="left">cocaine</td>
<td align="right">0.1</td>
</tr>
<tr class="even">
<td align="left">15</td>
<td align="right">14.5</td>
<td align="left">cocaine</td>
<td align="right">0.5</td>
</tr>
<tr class="odd">
<td align="left">16</td>
<td align="right">22.5</td>
<td align="left">cocaine</td>
<td align="right">1.0</td>
</tr>
<tr class="even">
<td align="left">17</td>
<td align="right">28.0</td>
<td align="left">cocaine</td>
<td align="right">2.0</td>
</tr>
</tbody>
</table>
<p>How could we look into the trends in different drugs’ popularity over the life span? How could we minimise the visual confusion in doing so?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(drugdata, <span class="kw">aes</span>(<span class="dt">x=</span>____ , <span class="dt">group=</span>____, <span class="dt">y=</span>______)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_____</span>(___________)</code></pre></div>
</div>
<div id="where-are-all-the-women-in-biopics" class="section level2">
<h2>8. Where are all the women in biopics?</h2>
<p><strong>Dataset: <a href="files/your-data-and-vis/biopics.csv">biopics.csv</a></strong></p>
<p>Abraham Lincoln, Winston Churchill, and Freddie Mercury have all been the subject of a biographical motion picture, also known as <em>biopic</em>. Every Great Man of History seems to have led a Hollywood actor to an Oscar. But where are all the Women of History?</p>
<p><img src="img/meryl.jpg" alt="Meryl" style="float:right;width:300px;"></p>
<p>Film nerds have collected the following data <code>biopics</code> which shows the year of release (<code>year_release</code>), the gender of the subject (<code>subject_sex</code>), the <code>title</code>, the <code>subject</code> name and the <code>lead_actor_actress</code> who played them.</p>
<table>
<caption>Biopic subject sex data</caption>
<thead>
<tr class="header">
<th align="right">year_release</th>
<th align="left">subject_sex</th>
<th align="left">title</th>
<th align="left">subject</th>
<th align="left">lead_actor_actress</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">1971</td>
<td align="left">Male</td>
<td align="left">10 Rillington Place</td>
<td align="left">John Christie</td>
<td align="left">Richard Attenborough</td>
</tr>
<tr class="even">
<td align="right">2013</td>
<td align="left">Male</td>
<td align="left">12 Years a Slave</td>
<td align="left">Solomon Northup</td>
<td align="left">Chiwetel Ejiofor</td>
</tr>
<tr class="odd">
<td align="right">2010</td>
<td align="left">Male</td>
<td align="left">127 Hours</td>
<td align="left">Aron Ralston</td>
<td align="left">James Franco</td>
</tr>
<tr class="even">
<td align="right">2014</td>
<td align="left">Male</td>
<td align="left">1987</td>
<td align="left">Ricardo Trogi</td>
<td align="left">Jean-Carl Boucher</td>
</tr>
<tr class="odd">
<td align="right">1998</td>
<td align="left">Male</td>
<td align="left">20 Dates</td>
<td align="left">Myles Berkowitz</td>
<td align="left">Myles Berkowitz</td>
</tr>
<tr class="even">
<td align="right">2008</td>
<td align="left">Male</td>
<td align="left">21</td>
<td align="left">Jeff Ma</td>
<td align="left">Jim Sturgess</td>
</tr>
</tbody>
</table>
<p>Is there a convenient way for us to visualize how this proportion in gender has changed over the last decades? Are female biopics on the rise or has it stayed constant?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(biopicdata, <span class="kw">aes</span>(<span class="dt">x=</span>_______, <span class="dt">fill=</span>______)) <span class="op">+</span><span class="st"> </span><span class="kw">geom_____</span>(____) </code></pre></div>
</div>
<div id="where-do-people-marry-their-second-cousins" class="section level2">
<h2>9. Where do people marry their second cousins?</h2>
<p><strong>Dataset: <a href="files/your-data-and-vis/cousin-marriage-data.csv">cousin-marriage-data.csv</a></strong></p>
<p>People born and bred in UK may be surprised to learn that marrying second cousins is a common practice. There are many reasons for doing so: staying close to the family and community, minimising the disruption of marriage, keeping property among consanguines…</p>
<p><img src="img/wedding.jpg" alt="Wedding" style="float:right;width:300px;"></p>
<p>We would therefore expect this to have a relationship with factors like poverty. In the data below, a dataframe containing the (<code>long</code>,<code>lat</code>) coordinates that define the corners of some countries has been merged with data that gives the <code>Percent</code> of how many people marry their second cousins.</p>
<table>
<caption>Map data</caption>
<thead>
<tr class="header">
<th align="right">long</th>
<th align="right">lat</th>
<th align="right">group</th>
<th align="right">order</th>
<th align="left">region</th>
<th align="left">subregion</th>
<th align="right">Percent</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">-69.89912</td>
<td align="right">12.45200</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">Aruba</td>
<td align="left">NA</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="right">-69.89571</td>
<td align="right">12.42300</td>
<td align="right">1</td>
<td align="right">2</td>
<td align="left">Aruba</td>
<td align="left">NA</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td align="right">-69.94219</td>
<td align="right">12.43853</td>
<td align="right">1</td>
<td align="right">3</td>
<td align="left">Aruba</td>
<td align="left">NA</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="right">-70.00415</td>
<td align="right">12.50049</td>
<td align="right">1</td>
<td align="right">4</td>
<td align="left">Aruba</td>
<td align="left">NA</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td align="right">-70.06612</td>
<td align="right">12.54697</td>
<td align="right">1</td>
<td align="right">5</td>
<td align="left">Aruba</td>
<td align="left">NA</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="right">-70.05088</td>
<td align="right">12.59707</td>
<td align="right">1</td>
<td align="right">6</td>
<td align="left">Aruba</td>
<td align="left">NA</td>
<td align="right">NA</td>
</tr>
</tbody>
</table>
<p>Moving into the territory of geospatial data visualization, could you figure out a way of showing in an overlay of the world map, how many people in each country engage in this practice?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(map2, <span class="kw">aes</span>(<span class="dt">x=</span>___, <span class="dt">y=</span>____, <span class="dt">group=</span>_____, <span class="dt">fill=</span>______)) <span class="op">+</span><span class="st"> </span><span class="kw">geom______</span>()</code></pre></div>
</div>
</div>
<div id="beyond-ggplot2-extension" class="section level1">
<h1>Beyond ggplot2 (extension)</h1>
<div id="network-data" class="section level2">
<h2>10. Network data:</h2>
<p><strong>Dataset: <a href="files/your-data-and-vis/love_actually_adjacencies.csv">love_actually_adjacencies.csv</a></strong></p>
<p>If you ever found yourself watching the romcom <em>Love, Actually</em> on Christmas, then you may have marvelled at how the screenwriters managed to weave together such a complex ensemble script. You may wonder if they ever used some kind of network visualization to map out all the character interactions.</p>
<p><img src="img/loveactually.jpg" alt="Love" style="float:right;width:300px;"></p>
<p>Unfortunately, <code>ggplot</code> does not provide convenient support for networks, but via a set of libraries called <code>networks</code>, <code>sna</code> and <code>GGally</code> we could nevertheless cobble together a dataframe where the two first columns (<code>actor</code> and <code>actors</code>) give the characters in an interaction, and the third (<code>number</code>) gives the interaction frequency.</p>
<table>
<caption>Love Actually data</caption>
<thead>
<tr class="header">
<th align="left">actors</th>
<th align="left">actor</th>
<th align="right">number</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">bill_nighy</td>
<td align="left">bill_nighy</td>
<td align="right">9</td>
</tr>
<tr class="even">
<td align="left">keira_knightley</td>
<td align="left">bill_nighy</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">andrew_lincoln</td>
<td align="left">bill_nighy</td>
<td align="right">2</td>
</tr>
<tr class="even">
<td align="left">hugh_grant</td>
<td align="left">bill_nighy</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="left">colin_firth</td>
<td align="left">bill_nighy</td>
<td align="right">1</td>
</tr>
<tr class="even">
<td align="left">alan_rickman</td>
<td align="left">bill_nighy</td>
<td align="right">1</td>
</tr>
</tbody>
</table>
<p>Using the function <code>ggnet2</code> we could simply feed the network to it. Now you know! (no exercise for this one :) )</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggnet2</span>(lanet, <span class="dt">label =</span> <span class="ot">TRUE</span>, <span class="dt">label.size =</span> <span class="dv">5</span>)</code></pre></div>
<p><img src="your-data-and-vis_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
</div>
</div>
<div id="solutions" class="section level1">
<h1>Solutions</h1>
<p>The solutions to all these questions can be downloaded here:</p>
<p><strong><a href="files/your-data-and-vis/Solutions.Rmd">Solutions.Rmd</a></strong></p>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
