<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title>Qualitative Data Visualisation</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="site_libs/pagedtable-1.1/js/pagedtable.js"></script>
<script src="site_libs/htmlwidgets-1.3/htmlwidgets.js"></script>
<script src="site_libs/viz-0.3/viz.js"></script>
<link href="site_libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet" />
<script src="site_libs/grViz-binding-1.0.0/grViz.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />
<link rel="shortcut icon" href="img/hex.png">


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; background-color: #f8f8f8; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
pre, code { background-color: #f8f8f8; }
code > span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code > span.dt { color: #204a87; } /* DataType */
code > span.dv { color: #0000cf; } /* DecVal */
code > span.bn { color: #0000cf; } /* BaseN */
code > span.fl { color: #0000cf; } /* Float */
code > span.ch { color: #4e9a06; } /* Char */
code > span.st { color: #4e9a06; } /* String */
code > span.co { color: #8f5902; font-style: italic; } /* Comment */
code > span.ot { color: #8f5902; } /* Other */
code > span.al { color: #ef2929; } /* Alert */
code > span.fu { color: #000000; } /* Function */
code > span.er { color: #a40000; font-weight: bold; } /* Error */
code > span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #000000; } /* Constant */
code > span.sc { color: #000000; } /* SpecialChar */
code > span.vs { color: #4e9a06; } /* VerbatimString */
code > span.ss { color: #4e9a06; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #000000; } /* Variable */
code > span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code > span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code > span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code > span.ex { } /* Extension */
code > span.at { color: #c4a000; } /* Attribute */
code > span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code > span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' || rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 60px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h2 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h3 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h4 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h5 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h6 {
  padding-top: 65px;
  margin-top: -65px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->



<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}


.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
  padding-left: 25px;
  text-indent: 0;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Hack Your Data Beautiful</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="/">
    <span class="fa fa-home"></span>
     
    psyTeachR
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Monday
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="intro-to-r.html">Introduction to R</a>
    </li>
    <li>
      <a href="intro-to-tidy-data.html">Intro to Tidy Data</a>
    </li>
    <li>
      <a href="metal_bands_actual.html">Intro to R Markdown</a>
    </li>
    <li>
      <a href="quant-data-vis.html">Quantitative Data Visualisation</a>
    </li>
    <li>
      <a href="qual-data-vis.html">Qualitative Data Visualization</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Tuesday
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="visualising-the-headlines.html">Visualising the Headlines</a>
    </li>
    <li>
      <a href="scrape-twitter.html">Twitter Data</a>
    </li>
    <li>
      <a href="rmarkdown_2.html">R Markdown Websites</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Wednesday
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="your-data-and-vis.html">Your Data and Visualisations</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="r_instructions.html">Installing R</a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Qualitative Data Visualisation</h1>

</div>


<p><img src="img/hex.png" class="hex"> <img src="img/ggplot2.png" class="hex"></p>
<div id="aims-of-this-session" class="section level2">
<h2>Aims of this Session</h2>
<p>This session will be split into two sections. Firstly, we’ll expand upon what you’ve learned about <code>ggplot2</code> syntax and functions and introduce <code>tidytext</code>. For the second half, we’ll have a go at visualising themes. We hope that you’ll have fun and feel free to ask any questions.</p>
</div>
<div id="setting-up" class="section level1">
<h1>Setting Up</h1>
<div id="materials" class="section level2">
<h2>Materials</h2>
<ul>
<li><p><strong><a href="files/qual-data-vis/Glasgow.txt">The data</a></strong> - first data set we’ll be using for the first section</p></li>
<li><p><strong><a href="files/qual-data-vis/peanut.txt">The data</a></strong> - second data set we’ll be using for the second section.</p></li>
</ul>
<p>Please download both, right click on each of the above files and select ‘save as’.</p>
<ul>
<li><strong><a href="files/qual-data-vis/HackYourDataQual.pptx">Powerpoint slides</a></strong></li>
</ul>
</div>
<div id="packages" class="section level2">
<h2>Packages</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(tidytext) <span class="co"># for transforming data</span>
<span class="kw">library</span>(tidyverse) <span class="co"># for data wrangling</span>
<span class="kw">library</span>(Cairo) <span class="co"># for ggwordcloud package to run</span>
<span class="kw">library</span>(ggwordcloud) <span class="co"># to render wordclouds</span>
<span class="kw">library</span>(DiagrammeR) <span class="co"># to make qual coding</span>
<span class="kw">library</span>(rgexf) <span class="co">#To create graph files</span></code></pre></div>
</div>
<div id="opening-file" class="section level2">
<h2>Opening File</h2>
<p>Firstly, we need to open up the text file. We have opened .csv before, opening a text file is slightly different using the read.table function. Once the file is loaded… let’s have a peek at some of the data.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">glasgowData &lt;-<span class="st"> </span><span class="kw">read.table</span>(<span class="st">&quot;Glasgow.txt&quot;</span>, <span class="dt">header =</span> <span class="ot">FALSE</span>, <span class="dt">fill =</span> <span class="ot">TRUE</span>, <span class="dt">encoding =</span> <span class="st">&quot;UTF-8&quot;</span>)

<span class="kw">print</span>(<span class="kw">head</span>(glasgowData), <span class="dv">1</span>)</code></pre></div>
<pre><code>##          V1           V2      V3       V4             V5         V6
## 1   Glasgow (/ˈɡlɑːzɡoʊ, ˈɡlæz-, ˈɡlɑːs-, ˈɡlæs-/;[4][5]     Scots:
## 2   Glasgow         grew    from        a          small      rural
## 3      With          the   onset       of            the Industrial
## 4        In          the    late     19th            and      early
## 5   Glasgow       hosted     the     2014   Commonwealth      Games
## 6 Etymology                                                        
##            V7         V8         V9        V10           V11          V12
## 1      Glesga [ˈɡlezɡə];   Scottish    Gaelic:       Glaschu [ˈkl̪ˠas̪əxu])
## 2  settlement         on        the      River         Clyde           to
## 3 Revolution,        the population        and       economy           of
## 4        20th centuries,  Glasgow&#39;s population          grew     rapidly,
## 5         and        the      first   European Championships           in
## 6                                                                        
##        V13 V14     V15         V16       V17       V18       V19       V20
## 1       is the    most    populous      city        in Scotland,       and
## 2   become the largest     seaport        in Scotland,       and     tenth
## 3  Glasgow and     the surrounding    region  expanded   rapidly        to
## 4 reaching   a    peak          of 1,127,825    people        in 1938.[10]
## 5    2018; and      is        also      well     known        in       the
## 6                                                                         
##             V21   V22     V23      V24           V25         V26     V27
## 1           the third    most populous          city          in     the
## 2       largest    by tonnage       in      Britain.   Expanding    from
## 3        become   one      of      the       world&#39;s pre-eminent centres
## 4 Comprehensive urban renewal projects            in         the  1960s,
## 5      sporting world     for football (particularly         the     Old
## 6                                                                       
##         V28        V29         V30        V31          V32       V33
## 1    United   Kingdom,          as         of          the      2017
## 2       the   medieval   bishopric        and        royal    burgh,
## 3        of chemicals,    textiles        and engineering;      most
## 4 resulting         in large-scale relocation           of    people
## 5      Firm    rivalry     between     Celtic          and Rangers),
## 6                                                                   
##         V34        V35        V36           V37      V38          V39
## 1 estimated       city population            of 621,020. Historically
## 2       and        the      later establishment       of          the
## 3   notably         in        the  shipbuilding      and       marine
## 4        to designated        new        towns;     such           as
## 5    rugby, athletics,    tennis,          golf      and    swimming.
## 6                                                                    
##            V40         V41          V42      V43  V44        V45      V46
## 1         part          of Lanarkshire,      the city        now    forms
## 2   University          of      Glasgow       in  the  fifteenth century,
## 3  engineering   industry,        which produced many innovative      and
## 4 Cumbernauld, Livingston,         East Kilbride  and peripheral suburbs,
## 5                                                                        
## 6                                                                        
##        V47      V48        V49      V50      V51
## 1      the  Glasgow       City  council    area,
## 2       it   became          a    major   centre
## 3   famous vessels.    Glasgow      was      the
## 4 followed       by successive boundary changes,
## 5                                               
## 6                                               
##                                 V52 V53        V54           V55     V56
## 1                               one  of        the            32 council
## 2                                of the   Scottish Enlightenment      in
## 3 Second City of the British Empire for       much            of     the
## 4                           reduced the population            of     the
## 5                                                                       
## 6                                                                       
##         V57        V58       V59       V60     V61        V62     V63
## 1     areas         of Scotland;       the   local  authority      is
## 2       the eighteenth  century.      From     the eighteenth century
## 3 Victorian        era       and Edwardian period,   although    many
## 4      City         of   Glasgow   council    area         to      an
## 5                                                                    
## 6                                                                    
##         V64      V65      V66       V67    V68                 V69 V70 V71
## 1   Glasgow     City Council.   Glasgow     is            situated  on the
## 2  onwards,      the     city      also   grew                  as one  of
## 3    cities    argue      the     title    was theirs.[6][7][8][9]        
## 4 estimated 615,070,     with 1,209,143 people              living  in the
## 5                                                                         
## 6                                                                         
##       V72       V73   V74       V75       V76           V77          V78
## 1   River     Clyde    in       the country&#39;s          West      Central
## 2   Great Britain&#39;s  main      hubs        of transatlantic        trade
## 3                                                                       
## 4 Greater   Glasgow urban area.[11]       The         wider metropolitan
## 5                                                                       
## 6                                                                       
##         V79         V80     V81 V82  V83       V84      V85      V86 V87
## 1 Lowlands. Inhabitants      of the city       are referred       to  as
## 2      with       North America and  the      West  Indies.             
## 3                                                                       
## 4      area          is    home  to over 1,800,000  people, equating  to
## 5                                                                       
## 6                                                                       
##           V88 V89     V90        V91         V92 V93  V94    V95  V96
## 1 Glaswegians  or Weegies          .          It  is  the fourth most
## 2                                                                    
## 3                                                                    
## 4      around 33%      of Scotland&#39;s population. The city    has  one
## 5                                                                    
## 6                                                                    
##       V97  V98     V99      V100        V101     V102     V103 V104
## 1 visited city      in       the UK[citation needed].  Glasgow   is
## 2                                                                  
## 3                                                                  
## 4      of  the highest densities          of      any locality   in
## 5                                                                  
## 6                                                                  
##       V105  V106       V107 V108    V109    V110 V111     V112    V113
## 1     also known        for  the Glasgow patter,    a distinct dialect
## 2                                                                     
## 3                                                                     
## 4 Scotland    at 4,023/km2.                                           
## 5                                                                     
## 6                                                                     
##   V114 V115  V116     V117 V118 V119  V120 V121  V122      V123 V124
## 1   of  the Scots language that   is noted  for being difficult   to
## 2                                                                   
## 3                                                                   
## 4                                                                   
## 5                                                                   
## 6                                                                   
##         V125 V126  V127 V128    V129 V130  V131
## 1 understand   by those from outside  the city.
## 2                                              
## 3                                              
## 4                                              
## 5                                              
## 6</code></pre>
</div>
</div>
<div id="preparing-data" class="section level1">
<h1>Preparing Data</h1>
<p>I think we can agree this is very messy indeed! But let us think about questions raised during session one as a way to move forward.</p>
<ul>
<li>How can I <strong>organise</strong> this data?</li>
<li>How can I make this data <strong>meaningful</strong>?</li>
<li>How can I make this data <strong>tidy</strong>?</li>
</ul>
<p>To make the data <strong>meangingful</strong> we could create a word cloud image, showing what words are most commonly used</p>
<p>To <strong>organise</strong> and <strong>tidy</strong> the data in a format for building a word cloud, we can use tidy text.</p>
<p>The tidy text format is defined by Julia Silge and David Robinson as data being in a table format with one-token-per-row. A token is a meaningful unit of text, such as a word. We are interested in words for our analysis so we would like to split this overall text file down into tokens. This process is called tokenization.</p>
<p>To make tidy text, we will use some data wrangling tricks that we have covered already, and introduce some new ones.</p>
<p>Firstly, we will use <code>gather()</code> as before to change our messy data to a tidy format.This creates two columns. We have named the first column key but you can call it anything you like as we are only selecting the word column to create the tidy_glasgow dataframe that we will be working with.</p>
<p>How many unique words do we have?</p>
<p><code>unique(tidy_glasgow$word) %&gt;%  length()</code></p>
<p>Breaking the code snippet above down, we can see it is performing two key things:</p>
<p><code>unique(tidy_glasgow$word)</code> picks out each unique word.</p>
<p>However, we are not interested in what the words are - just the number</p>
<p>Pipe (%&gt;%) and then the <code>length()</code> function to discover we have 5120 unique words in total. <strong>Note</strong> if you are using windows it might read as 5123 because of how some characters are rendered.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tidy_glasgow &lt;-<span class="st"> </span><span class="kw">gather</span>(glasgowData, key, word) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">select</span>(word)

<span class="co">#checks how many unique words there are in total</span>

<span class="kw">unique</span>(tidy_glasgow<span class="op">$</span>word) <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">length</span>()</code></pre></div>
<pre><code>## [1] 5120</code></pre>
<div id="tidying-data---tidytext" class="section level2">
<h2>Tidying Data - Tidytext</h2>
<p>Now that we have our words in long format we can tokenize, reduce our dataframe down down to only unique observations (in this case, words), and count the number of each observation.</p>
<p><code>unnest_tokens(word, word)</code> transforms our data to be one word per row. Also strips punctuation. <code>count(word, sort = TRUE)</code> counts up the total amount of each word, sort = TRUE then places them in order. <code>ungroup()</code> count has grouped the data by word, we have now ungrouped so tokens is not grouped by word.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tokens &lt;-<span class="st"> </span>tidy_glasgow <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">unnest_tokens</span>(word, word) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">count</span>(word, <span class="dt">sort =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ungroup</span>()</code></pre></div>
</div>
<div id="exploring-what-words-are-most-frequent." class="section level2">
<h2>Exploring what words are most frequent.</h2>
<p>Now we have cleaned the document up, let us see what words are the most frequent.</p>
<p><code>head()</code> is a handy function built into R, which lets us peek at the top values. Let’s see what the top ten are.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">top_<span class="dv">10</span> &lt;-<span class="st"> </span>tokens <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">head</span>(<span class="dv">10</span>)

knitr<span class="op">::</span><span class="kw">kable</span>(top_<span class="dv">10</span>, <span class="dt">caption =</span> <span class="st">&quot;Top ten all words table&quot;</span>)</code></pre></div>
<table>
<caption>Top ten all words table</caption>
<thead>
<tr class="header">
<th align="left">word</th>
<th align="right">n</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">the</td>
<td align="right">1421</td>
</tr>
<tr class="even">
<td align="left">of</td>
<td align="right">681</td>
</tr>
<tr class="odd">
<td align="left">and</td>
<td align="right">567</td>
</tr>
<tr class="even">
<td align="left">in</td>
<td align="right">510</td>
</tr>
<tr class="odd">
<td align="left">glasgow</td>
<td align="right">393</td>
</tr>
<tr class="even">
<td align="left">to</td>
<td align="right">280</td>
</tr>
<tr class="odd">
<td align="left">a</td>
<td align="right">214</td>
</tr>
<tr class="even">
<td align="left">city</td>
<td align="right">213</td>
</tr>
<tr class="odd">
<td align="left">is</td>
<td align="right">179</td>
</tr>
<tr class="even">
<td align="left">as</td>
<td align="right">138</td>
</tr>
</tbody>
</table>
</div>
<div id="removing-unwanted-words" class="section level2">
<h2>Removing Unwanted Words</h2>
<p>Success, we have a word list. However, there are some common words that we might want to remove. Tidytext has a built in stop_words package that we can call on to remove frequent words such as “the” “and” etc.</p>
<p>We would like to be able to remove our own custom words. This is particularly useful for qualitative research where some words may be confidential. We can define what words we want to remove.</p>
<p>There is no numeric data within the top ten words, but we will remove numbers anyway to keep the focus simply on words.</p>
<p>We will need the following:</p>
<p><code>data(&quot;stop_words&quot;)</code> to load the common stop words.</p>
<p><code>data.frame(word = c(&quot;glasgow's&quot;, &quot;scottish&quot;))</code> to create a dataframe with custom stop words that we want removed. You can include anything you like.</p>
<p><code>str_detect</code> to detect pre-defined strings (again, telling R to look in the word column). In this case we are filtering out numbers and returning a dataframe with all the rows containing all the unique numbers in the data set.</p>
<p><code>anti_join</code> to return all rows that do not feature the data we want to remove. We will use it three times to remove common stopwords, numbers and also our unique words.</p>
<p>Then we can look at the top ten words again and see how it looks compared to before. Much better.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># removing stop words with built in tidytext package</span>

<span class="kw">data</span>(<span class="st">&quot;stop_words&quot;</span>)
tokens_clean &lt;-<span class="st"> </span>tokens <span class="op">%&gt;%</span>
<span class="st">  </span><span class="kw">anti_join</span>(stop_words)

<span class="co"># removing numbers</span>

nums &lt;-<span class="st"> </span>tokens_clean <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(<span class="kw">str_detect</span>(word, <span class="st">&quot;^[0-9]&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(word) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">unique</span>()

tokens_clean &lt;-<span class="st"> </span>tokens_clean <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">anti_join</span>(nums, <span class="dt">by =</span> <span class="st">&quot;word&quot;</span>)

unique_stopwords &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">word =</span> <span class="kw">c</span>(<span class="st">&quot;glasgow&#39;s&quot;</span>,<span class="st">&quot;city&#39;s&quot;</span>, <span class="st">&quot;scottish&quot;</span>))

tokens_clean &lt;-<span class="st"> </span>tokens_clean <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">anti_join</span>(unique_stopwords, <span class="dt">by =</span> <span class="st">&quot;word&quot;</span>)

top_10_clean &lt;-<span class="st"> </span>tokens_clean <span class="op">%&gt;%</span><span class="st"> </span>
<span class="st">  </span><span class="kw">head</span>(<span class="dv">10</span>) 

knitr<span class="op">::</span><span class="kw">kable</span>(top_10_clean, <span class="dt">caption =</span> <span class="st">&quot;Top ten clean table&quot;</span>)</code></pre></div>
<table>
<caption>Top ten clean table</caption>
<thead>
<tr class="header">
<th align="left">word</th>
<th align="right">n</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">glasgow</td>
<td align="right">393</td>
</tr>
<tr class="even">
<td align="left">city</td>
<td align="right">213</td>
</tr>
<tr class="odd">
<td align="left">scotland</td>
<td align="right">81</td>
</tr>
<tr class="even">
<td align="left">centre</td>
<td align="right">58</td>
</tr>
<tr class="odd">
<td align="left">clyde</td>
<td align="right">53</td>
</tr>
<tr class="even">
<td align="left">west</td>
<td align="right">45</td>
</tr>
<tr class="odd">
<td align="left">park</td>
<td align="right">41</td>
</tr>
<tr class="even">
<td align="left">street</td>
<td align="right">40</td>
</tr>
<tr class="odd">
<td align="left">population</td>
<td align="right">37</td>
</tr>
<tr class="even">
<td align="left">home</td>
<td align="right">33</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="data-visualisation" class="section level1">
<h1>Data Visualisation</h1>
<div id="creating-a-wordcloud" class="section level2">
<h2>Creating a Wordcloud</h2>
<p>We can now create a wordcloud using the ggwordcloud package.</p>
<p>Success, a word cloud with a title. We have chosen to show the top 50 words.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">wordcloudplot &lt;-<span class="st"> </span><span class="kw">head</span>(tokens_clean, <span class="dv">50</span>) <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">label =</span> word, <span class="dt">color =</span> word, <span class="dt">size =</span> n)) <span class="op">+</span>
<span class="st">    </span><span class="kw">geom_text_wordcloud_area</span>() <span class="op">+</span>
<span class="st">    </span><span class="kw">scale_size_area</span>(<span class="dt">max_size =</span> <span class="dv">20</span>) <span class="op">+</span>
<span class="st">    </span><span class="kw">theme_minimal</span>() <span class="op">+</span><span class="st"> </span><span class="kw">ggtitle</span>(<span class="st">&quot;Glasgow Word Cloud&quot;</span>) 

wordcloudplot</code></pre></div>
<p><img src="qual-data-vis_files/figure-html/wordscloud-1.png" width="672" /></p>
</div>
<div id="task-1" class="section level2">
<h2>Task 1</h2>
<p>Have a go at creating a word cloud with the top 200 words.</p>
<p><details> <summary>Show Solution…</summary></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(tokens_clean, <span class="dv">200</span>) <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(<span class="dt">label =</span> word, <span class="dt">color =</span> word, <span class="dt">size =</span> n)) <span class="op">+</span>
<span class="st">    </span><span class="kw">geom_text_wordcloud_area</span>() <span class="op">+</span>
<span class="st">    </span><span class="kw">scale_size_area</span>(<span class="dt">max_size =</span> <span class="dv">20</span>) <span class="op">+</span>
<span class="st">    </span><span class="kw">theme_minimal</span>() <span class="op">+</span><span class="st"> </span><span class="kw">ggtitle</span>(<span class="st">&quot;Glasgow Word Cloud&quot;</span>)</code></pre></div>
<p><img src="qual-data-vis_files/figure-html/unnamed-chunk-1-1.png" width="672" /></p>
</div>
<div id="reminder" class="section level2">
<h2>Reminder</h2>
<p>If you’re new to coding, something that you will pick up fast is the fact that we often use the internet to search for information that we need, or to help us out when we get stuck.</p>
<p>Remember that you are <strong>not</strong> expected to remember code and it is perfectly ok (assuming you have internet access) to google any of the functions we have covered at anytime.</p>
</div>
</div>
<div id="making-qual-code-diagrams" class="section level1">
<h1>Making Qual Code Diagrams</h1>
<p>The <code>library(DiagrammeR)</code> package has been specifically created so that standardised syntax can be used to create diagrams in R.</p>
<div id="opening-text-file" class="section level2">
<h2>Opening Text File</h2>
<p>Here, we can open up a raw text file containing key themes from an interview with people about peanut butter.</p>
<p>First we will open the raw text file. <code>scan</code> opens up the file as a list which is useful here.</p>
</div>
<div id="subsetting" class="section level2">
<h2>Subsetting</h2>
<p>During our rigerous (and fake) thematic analysis, we constructed peanut butter as an overarching key theme. However, we also justified some other subthemes. In total we have five themes which we can view by <strong>subsetting</strong> the data as follows:</p>
<p><code>x[1]</code> is Peanut Butter <code>x[2]</code> is Jelly Time (and so on)</p>
</div>
<div id="key-diagrammer-syntax" class="section level2">
<h2>Key DiagrammeR Syntax</h2>
<p>DiagrammeR works by plotting diagrams as <strong>journeys</strong> (edges) going <strong>from</strong> and <strong>to</strong> (nodes). As you can see in the code below because Peanut Butter x[1] is the overarching theme, all journeys start with it.</p>
<p><code>nodesn=c(x[1],x[2],x[3],x[4])</code> defines our node names direct from text</p>
<p><code>create_node_df</code> creates our themes as ‘nodes’ (destinations)</p>
<p><code>create_edge_df</code> defines theme relationships as ‘edges’ (journeys)</p>
<p><code>create_graph</code> creates a graph which we can render.</p>
<p><code>layout = &quot;tree&quot;</code> is important because it creates the hierarchal nature, if you are curious - try removing it and see what happens.</p>
<p>There is a transparent audit trail for this diagram, we chose not to plot <code>x[5]</code> “Hate it” because a minority of participants conversations clustered around this. Visualiasing qualitative data in this way helps us to be more transparent about decisions that we make at different steps along the research journey.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">scan</span>(<span class="st">&quot;peanut.txt&quot;</span>, <span class="dt">what=</span><span class="st">&quot;&quot;</span>, <span class="dt">sep=</span><span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>, <span class="dt">quiet =</span> <span class="ot">TRUE</span>)


from=<span class="kw">c</span>(x[<span class="dv">1</span>], x[<span class="dv">1</span>], x[<span class="dv">1</span>])
to=<span class="kw">c</span>(x[<span class="dv">2</span>],x[<span class="dv">3</span>],x[<span class="dv">4</span>])
nodesn=<span class="kw">c</span>(x[<span class="dv">1</span>],x[<span class="dv">2</span>],x[<span class="dv">3</span>],x[<span class="dv">4</span>])
nodes &lt;-<span class="st"> </span><span class="kw">create_node_df</span>(<span class="dt">n=</span><span class="kw">length</span>(nodesn), <span class="dt">label=</span>nodesn,  <span class="dt">width=</span><span class="fl">0.9</span>, <span class="dt">shape =</span> <span class="st">&quot;rectangle&quot;</span>, <span class="dt">color =</span> <span class="st">&quot;#983E82&quot;</span>, <span class="dt">fillcolor =</span> <span class="st">&quot;white&quot;</span>) 
edges &lt;-<span class="st"> </span><span class="kw">create_edge_df</span>(<span class="dt">from =</span> <span class="kw">factor</span>(from, <span class="dt">levels=</span>nodesn), <span class="dt">to =</span> <span class="kw">factor</span>(to, <span class="dt">levels=</span>nodesn), <span class="dt">arrowhead =</span> <span class="st">&quot;arrow&quot;</span>, <span class="dt">color =</span> <span class="st">&quot;black&quot;</span>)   
graph &lt;-<span class="st"> </span><span class="kw">create_graph</span>(<span class="dt">nodes_df =</span> nodes, <span class="dt">edges_df =</span> edges, <span class="dt">directed =</span> <span class="ot">FALSE</span>) 
graph <span class="op">%&gt;%</span><span class="st"> </span>
<span class="kw">render_graph</span>(<span class="dt">title =</span> <span class="st">&quot;Themes From Interviews&quot;</span>, <span class="dt">layout =</span> <span class="st">&quot;tree&quot;</span>)</code></pre></div>
<div id="htmlwidget-20cb5bf2ee971cc89a16" style="width:672px;height:480px;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-20cb5bf2ee971cc89a16">{"x":{"diagram":"graph {\n\ngraph [layout = \"neato\",\n       outputorder = \"edgesfirst\",\n       bgcolor = \"white\",\n       label = \"Themes From Interviews\",\n       labelloc = \"t\",\n       labeljust = \"c\",\n       fontname = \"Helvetica\",\n       fontcolor = \"gray30\"]\n\nnode [fontname = \"Helvetica\",\n      fontsize = \"10\",\n      shape = \"circle\",\n      fixedsize = \"true\",\n      width = \"0.5\",\n      style = \"filled\",\n      fillcolor = \"aliceblue\",\n      color = \"gray70\",\n      fontcolor = \"gray50\"]\n\nedge [fontname = \"Helvetica\",\n     fontsize = \"8\",\n     len = \"1.5\",\n     color = \"gray80\",\n     arrowsize = \"0.5\"]\n\n  \"1\" [label = \"Peanut Butter\", width = \"0.9\", shape = \"rectangle\", color = \"#983E82\", fillcolor = \"#FFFFFF\", fontcolor = \"#000000\", pos = \"1,2!\"] \n  \"2\" [label = \"Jelly Time\", width = \"0.9\", shape = \"rectangle\", color = \"#983E82\", fillcolor = \"#FFFFFF\", fontcolor = \"#000000\", pos = \"0,1!\"] \n  \"3\" [label = \"Dogs like it\", width = \"0.9\", shape = \"rectangle\", color = \"#983E82\", fillcolor = \"#FFFFFF\", fontcolor = \"#000000\", pos = \"1,1!\"] \n  \"4\" [label = \"Allergies\", width = \"0.9\", shape = \"rectangle\", color = \"#983E82\", fillcolor = \"#FFFFFF\", fontcolor = \"#000000\", pos = \"2,1!\"] \n\"1\"--\"2\" [arrowhead = \"arrow\", color = \"black\"] \n\"1\"--\"3\" [arrowhead = \"arrow\", color = \"black\"] \n\"1\"--\"4\" [arrowhead = \"arrow\", color = \"black\"] \n}","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="task-2" class="section level2">
<h2>Task 2</h2>
<p>Add in “Hate it” to the coding diagram. <strong>Hint</strong> remember if there are four “journeys” then there need to be four defined places to start from.</p>
<p><details> <summary>Show Solution…</summary></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">from=<span class="kw">c</span>(x[<span class="dv">1</span>], x[<span class="dv">1</span>], x[<span class="dv">1</span>], x[<span class="dv">1</span>])
to=<span class="kw">c</span>(x[<span class="dv">2</span>],x[<span class="dv">3</span>],x[<span class="dv">4</span>], x[<span class="dv">5</span>])
nodesn=<span class="kw">c</span>(x[<span class="dv">1</span>],x[<span class="dv">2</span>],x[<span class="dv">3</span>],x[<span class="dv">4</span>], x[<span class="dv">5</span>])
nodes &lt;-<span class="st"> </span><span class="kw">create_node_df</span>(<span class="dt">n=</span><span class="kw">length</span>(nodesn), <span class="dt">label=</span>nodesn,  <span class="dt">width=</span><span class="fl">0.9</span>, <span class="dt">shape =</span> <span class="st">&quot;rectangle&quot;</span>, <span class="dt">color =</span> <span class="st">&quot;#983E82&quot;</span>, <span class="dt">fillcolor =</span> <span class="st">&quot;white&quot;</span>) 
edges &lt;-<span class="st"> </span><span class="kw">create_edge_df</span>(<span class="dt">from =</span> <span class="kw">factor</span>(from, <span class="dt">levels=</span>nodesn), <span class="dt">to =</span> <span class="kw">factor</span>(to, <span class="dt">levels=</span>nodesn), <span class="dt">arrowhead =</span> <span class="st">&quot;arrow&quot;</span>, <span class="dt">color =</span> <span class="st">&quot;black&quot;</span>)   
graph &lt;-<span class="st"> </span><span class="kw">create_graph</span>(<span class="dt">nodes_df =</span> nodes, <span class="dt">edges_df =</span> edges, <span class="dt">directed =</span> <span class="ot">FALSE</span>) 
graph <span class="op">%&gt;%</span><span class="st"> </span>
<span class="kw">render_graph</span>(<span class="dt">title =</span> <span class="st">&quot;Themes From Interviews&quot;</span>, <span class="dt">layout =</span> <span class="st">&quot;tree&quot;</span>)</code></pre></div>
<div id="htmlwidget-a855d53f5dec90ce090a" style="width:672px;height:480px;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-a855d53f5dec90ce090a">{"x":{"diagram":"graph {\n\ngraph [layout = \"neato\",\n       outputorder = \"edgesfirst\",\n       bgcolor = \"white\",\n       label = \"Themes From Interviews\",\n       labelloc = \"t\",\n       labeljust = \"c\",\n       fontname = \"Helvetica\",\n       fontcolor = \"gray30\"]\n\nnode [fontname = \"Helvetica\",\n      fontsize = \"10\",\n      shape = \"circle\",\n      fixedsize = \"true\",\n      width = \"0.5\",\n      style = \"filled\",\n      fillcolor = \"aliceblue\",\n      color = \"gray70\",\n      fontcolor = \"gray50\"]\n\nedge [fontname = \"Helvetica\",\n     fontsize = \"8\",\n     len = \"1.5\",\n     color = \"gray80\",\n     arrowsize = \"0.5\"]\n\n  \"1\" [label = \"Peanut Butter\", width = \"0.9\", shape = \"rectangle\", color = \"#983E82\", fillcolor = \"#FFFFFF\", fontcolor = \"#000000\", pos = \"1.5,2!\"] \n  \"2\" [label = \"Jelly Time\", width = \"0.9\", shape = \"rectangle\", color = \"#983E82\", fillcolor = \"#FFFFFF\", fontcolor = \"#000000\", pos = \"0,1!\"] \n  \"3\" [label = \"Dogs like it\", width = \"0.9\", shape = \"rectangle\", color = \"#983E82\", fillcolor = \"#FFFFFF\", fontcolor = \"#000000\", pos = \"1,1!\"] \n  \"4\" [label = \"Allergies\", width = \"0.9\", shape = \"rectangle\", color = \"#983E82\", fillcolor = \"#FFFFFF\", fontcolor = \"#000000\", pos = \"2,1!\"] \n  \"5\" [label = \"Hate it\", width = \"0.9\", shape = \"rectangle\", color = \"#983E82\", fillcolor = \"#FFFFFF\", fontcolor = \"#000000\", pos = \"3,1!\"] \n\"1\"--\"2\" [arrowhead = \"arrow\", color = \"black\"] \n\"1\"--\"3\" [arrowhead = \"arrow\", color = \"black\"] \n\"1\"--\"4\" [arrowhead = \"arrow\", color = \"black\"] \n\"1\"--\"5\" [arrowhead = \"arrow\", color = \"black\"] \n}","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div id="references" class="section level1">
<h1>References</h1>
<p><a href="https://psyteachr.github.io/hack-your-data/">HackYourDataBeautiful</a></p>
<p><a href="https://www.tidytextmining.com/">tidytext textbook</a></p>
<p><a href="http://rich-iannone.github.io/DiagrammeR/">DiagrammeR Guide</a></p>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
